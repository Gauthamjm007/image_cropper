(this["webpackJsonpimage-4-cropper"]=this["webpackJsonpimage-4-cropper"]||[]).push([[0],{36:function(e,t,a){e.exports=a(53)},41:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),i=a.n(l),c=(a(41),a(12)),o=a(13),s=a(15),u=a(17),d=a(19),m=a(29),h=a(11),p=a.n(h),v=a(25),g=a(30),f=a.n(g);function w(e){return r.a.createElement("div",{className:"final-image"},r.a.createElement("div",{className:"background-blur",onClick:e.closePreview}),r.a.createElement("div",{className:"cover"},r.a.createElement("div",{className:"row"},r.a.createElement("p",null,e.selectionType,e.resolution),r.a.createElement("button",{className:"close-btn",onClick:e.closePreview},"x")),r.a.createElement("div",{className:"row"},r.a.createElement("img",{alt:"Crop",style:{maxWidth:"100%"},src:e.croppedImageUrl}))))}a(43);var E=a(33),k=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={images:null},n.props.handleLoader(),n}return Object(o.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"image-preview"},r.a.createElement("div",{className:"row"},r.a.createElement(E.a,null,this.props.images.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("img",{alt:e.name,style:{maxWidth:"70%",width:"auto",height:"auto"},src:e.url}),r.a.createElement("p",{className:"legend"},e.name,"- ",e.value))})))))}}]),a}(n.Component),b=(a(47),a(70)),C=function(){var e=Object(v.a)(p.a.mark((function e(t){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={tags:"browser_upload",file:t,upload_preset:"doc_codepen_example"},"https://api.cloudinary.com/v1_1/demo/upload",e.next=4,fetch("https://api.cloudinary.com/v1_1/demo/upload",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(a)});case 4:return n=e.sent,e.abrupt("return",n.json());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).componentDidMount=function(){n.onSelectFile()},n.onSelectFile=function(){n.setState({src:n.props.url})},n.handleReload=function(){window.location.reload()},n.onImageLoaded=function(e){n.imageRef=e},n.onCropComplete=function(e){var t=Object(m.a)({},e);n.makeClientCrop(t)},n.onCropChange=function(e,t){n.setState({cropSelection:e})},n.onResolutionChange=function(e){e.preventDefault();var t=e.target.name,a={};Object(d.a)(n.state.list).forEach((function(e){if(e.name===t){var n=parseInt(e.width),r=parseInt(e.height);a={unit:"px",x:e.x,y:e.y,width:n,height:r,value:e.value,name:e.name}}})),n.onCropComplete(a)},n.togglePreviewScreen=function(e){var t=!n.state.showPreview;n.setState({showPreview:t})},n.handleSelectImage=function(e){var t=e.target.name,a=Object(d.a)(n.state.list);a.forEach((function(e){e.name===t&&(e.isChecked=!e.isChecked)})),n.setState({list:a})},n.uploadImages=function(){var e=Object(v.a)(p.a.mark((function e(t){var a,r,l,i,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=!n.state.uploadAll,r=Object(d.a)(n.state.list),l=[],n.setState({loading:!0}),i=0;case 5:if(!(i<r.length)){e.next=14;break}if(!r[i].isChecked){e.next=11;break}return e.next=9,C(r[i].url);case 9:(c=e.sent)&&(r[i].url=c.url,l.push(r[i]));case 11:i++,e.next=5;break;case 14:n.setState({list:r,loading:!1,loadSuccess:!0,uploadAll:a,uploadList:l});case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.handleLoader=function(e){n.setState({loadSuccess:!1})},n.returnButtonClass=function(e){var t="";return n.state.active===e.value&&!0===e.clicked?t=e.color+" clicked":n.state.active===e.value&&!1===e.clicked?t=e.color:n.state.active!==e.value&&!0===e.clicked&&(t="clicked"),t},n.returnPreviewBtnClass=function(){var e="";return Object(d.a)(n.state.list).forEach((function(t){t.value===n.state.active&&(e=t.color)})),"preview-button "+e},n.state={src:null,cropSelection:{unit:"px",width:755,height:450,x:0,y:0,value:"755 x 450",name:"size1"},list:[{unit:"px",name:"size1",value:"755 x 450",width:755,height:450,x:0,y:0,url:null,clicked:!0,isChecked:!0},{unit:"px",name:"size2",value:"365 x 450",width:365,height:450,x:0,y:0,url:null,clicked:!1,isChecked:!1},{unit:"px",name:"size3",value:"365 x 212",width:365,height:212,x:0,y:0,url:null,clicked:!1,isChecked:!1},{unit:"px",name:"size4",value:"380 x 380",width:380,height:380,x:0,y:0,url:null,clicked:!1,isChecked:!1}],active:"755 x 450",selectedType:"size1",showPreview:!1,loading:!1,loadSuccess:!1,uploadAll:!1,uploadList:[]},n}return Object(o.a)(a,[{key:"makeClientCrop",value:function(){var e=Object(v.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.imageRef&&t.width&&t.height)){e.next=5;break}return e.next=3,this.getCroppedImg(this.imageRef,t,"newFile.jpeg");case 3:a=e.sent,this.setState((function(e){for(var n=0;n<e.list.length;n++)if(e.list[n].value===t.value){e.list[n].x=t.x,e.list[n].y=t.y,e.list[n].url=a,e.list[n].clicked=!0;var r=Object(d.a)(e.list);return{cropSelection:t,list:r,active:e.list[n].value,selectedType:e.list[n].name,croppedImageUrl:a}}}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCroppedImg",value:function(e,t,a){var n=this,r=document.createElement("canvas"),l=e.naturalWidth/e.width,i=e.naturalHeight/e.height;r.width=t.width,r.height=t.height,r.getContext("2d").drawImage(e,t.x*l,t.y*i,t.width*l,t.height*i,0,0,t.width,t.height);var c="";return new Promise((function(e,t){r.toBlob((function(t){t&&(t.name=a,window.URL.revokeObjectURL(n.fileUrl),n.fileUrl=window.URL.createObjectURL(t),e(n.fileUrl))}),"image/jpeg"),c=r.toDataURL()})),c}},{key:"render",value:function(){var e=this,t=this.state,a=t.cropSelection,n=t.croppedImageUrl,l=t.src,i=t.list,c=t.uploadList,o=i.filter((function(e){return!0===e.isChecked}));return r.a.createElement("div",{className:"image-cropper"},!this.state.uploadAll&&r.a.createElement("div",{className:"preview-image"},r.a.createElement(f.a,{src:l,crop:a,locked:!0,ruleOfThirds:!0,onImageLoaded:this.onImageLoaded,onComplete:this.onCropComplete,onChange:this.onCropChange})),!this.state.uploadAll&&r.a.createElement("div",{className:"button-group"},i.map((function(t,a){return r.a.createElement("div",{className:"buttons",key:t.value},r.a.createElement("input",{type:"button",name:t.name,className:e.returnButtonClass(t),value:t.value,onClick:e.onResolutionChange}),r.a.createElement("input",{type:"checkbox",name:t.name,defaultChecked:t.isChecked,onClick:e.handleSelectImage,disabled:!t.clicked}))})),r.a.createElement("div",{className:"button-row"},r.a.createElement(b.a,{variant:"contained",color:"primary",disabled:o.length<1,onClick:this.uploadImages},"Upload Selected (",o.length,")"))),this.state.showPreview&&r.a.createElement(w,{croppedImageUrl:n,closePreview:this.togglePreviewScreen,resolution:this.state.active,selectionType:this.state.selectedType}),this.state.loading&&r.a.createElement("div",{className:"loader-screen"},r.a.createElement("div",{className:"blur-screen"}),r.a.createElement("div",{className:"cover"},r.a.createElement("div",{className:"row"},r.a.createElement("p",null,"Uploading ",o.length," cropped images to Cloud")))),this.state.loadSuccess&&r.a.createElement("div",{className:"loader-screen"},r.a.createElement("div",{className:"blur-screen"}),r.a.createElement("div",{className:"cover"},r.a.createElement("div",{className:"row"},r.a.createElement("p",null,"Uploaded Images Successfully")))),this.state.uploadAll&&r.a.createElement(r.a.Fragment,null,r.a.createElement(k,{images:c,handleLoader:this.handleLoader}),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.handleReload},"Back")))}}]),a}(n.Component);x.getDerivedStateFromProps=function(e,t){if(t.url!==e.url)return{src:e.url}};var y=a(32),S=a.n(y),I=a(26),N=a.n(I),j=a(69),O=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={selectedImage:null,name:"No file chosen",extension:null,fileUrl:null},e.getImageExt=function(e){var t=e.split("/");return t[t.length-1]},e.handleImage=function(t){var a=t.target.files[0],n=a.type;if(n.includes("image")){var r=window.URL||window.webkitURL,l=new Image,i=new FileReader,c=r.createObjectURL(a);l.onload=function(){var t=l.width.toString(),o=l.height.toString();if("1024"===t&&"1024"===o){r.revokeObjectURL(c);var s=e.getImageExt(n);i.onload=function(t){var n=t.target.result;e.setState({selectedImage:a,name:a.name,extension:s,fileUrl:n})},i.readAsDataURL(a)}else N.a.fire("Error Uploading Photo","Please upload an Image of 1024 X 1024 size","error"),e.setState({selectedImage:null,name:"No file chosen",extension:null,fileUrl:null})},l.src=c}else N.a.fire("Error ","You can upload only Images","error")},e.handleClick=function(t){t.preventDefault(),e.input.click(t)},e.handleReload=function(){window.location.reload()},e}return Object(o.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"navbar"},r.a.createElement("div",{onClick:this.handleReload},r.a.createElement(j.a,{container:!0,spacing:3},r.a.createElement(j.a,{item:!0,xs:2},r.a.createElement("h2",null,"Image 4 Cropper")),r.a.createElement(j.a,{item:!0,xs:2},r.a.createElement("img",{src:"https://i.ibb.co/r33Sw3D/crop.png",alt:"logo",style:{width:30,height:30}}))))),"No file chosen"===this.state.name?r.a.createElement("div",{className:"upload-section"},r.a.createElement("input",{type:"file",tabIndex:"-1",className:"hidden-input",onChange:this.handleImage,ref:function(t){return e.input=t}}),r.a.createElement("div",{className:"input-cover",onClick:this.handleClick},r.a.createElement(b.a,{variant:"contained",color:"primary",startIcon:r.a.createElement(S.a,null)},"Upload Image"))):r.a.createElement(x,{url:this.state.fileUrl}))}}]),a}(n.Component);a(52);var U=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(O,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.0900297e.chunk.js.map